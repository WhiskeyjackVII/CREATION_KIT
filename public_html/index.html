<!DOCTYPE html>
<html>
	<head>
		<title>Game</title>
                <script src="js/Framework/ActorHandler.js" type="text/javascript"></script>
                <script src="js/Framework/Actor.js" type="text/javascript"></script>
                <script src="js/libs/keypress/keypress.js" type="text/javascript"></script>
                <script src="js/Framework/Commands.js" type="text/javascript"></script>
                <script src="js/Framework/GUID_GENERATOR.js" type="text/javascript"></script>
	</head>
	<body>
	
		<canvas id="gameCanvas" width=800 height=600 style= "border:1px solid black">
			Browser doesn't support HTML5
		</canvas>
		
		<h1>Test</h1>
		<input type="button" onclick="runGameLoop()" value="Run Game">
		<input type="button" onclick="addActorOne()" value="Add Actor One">
                <input type="button" onclick="addActorTwo()" value="Add Actor Two">
                <input type="button" onclick="addPlayer()" value="Add Player">
                <input type="button" onclick="setup()" value="Setup">
                
                <a href="actorCreater.html">Actor Creator</a>
                
		<script type='text/javascript'>
      		
                var CANVAS_WIDTH = 480;
                var CANVAS_HEIGHT = 320;
                var FPS = 30;
        	var gameLoop;
                var ACTION_HANDLER;
                var game_canvas;
                var game_context;
        	
                
                
                    
                function setup(){
                    
        	game_canvas = document.getElementById("gameCanvas");
                game_context = game_canvas.getContext("2d");
                ACTOR_HANDLER = new ActorHandler();
                ACTOR_HANDLER.registerCollisionCheck("ACTOR_ONE","ACTOR_TWO", new KillCommand(new ScoreCommand(null)),0);
                ACTOR_HANDLER.registerCollisionCheck("ACTOR_ONE","ACTOR_TWO", new BounceOneActorVertical(null),3);
       		ACTOR_HANDLER.registerCollisionCheck("PLAYER","ACTOR_ONE", new KillCommand(new ScoreCommand(null)),0);
                CANVAS_WIDTH = game_canvas.width;
                CANVAS_HEIGHT = game_canvas.height;
                    
                }
        	
        	function addActorOne(){
                    //Math.floor(Math.random() * 480)
                    var actor = new Actor(Math.floor(Math.random() * (CANVAS_WIDTH-100)),Math.floor(Math.random() * (CANVAS_HEIGHT-100)),100,5,true,"js/Framework/actorPlaceHolder01.jpg","ACTOR_ONE");
                    
                    ACTOR_HANDLER.registerActor(actor);
        	}
                
                function addActorTwo(){
                    //Math.floor(Math.random() * 480)
                    var actor = new Actor(Math.floor(Math.random() * (CANVAS_WIDTH-100)),Math.floor(Math.random() * (CANVAS_HEIGHT-100)),150,5,true,"js/Framework/actorPlaceHolder02.jpg","ACTOR_TWO");
                    actor.stop();
                    ACTOR_HANDLER.registerActor(actor);
        	}
                
                function addPlayer(){
                    var player = new Actor(300,300,0,5,false,"js/Framework/actorPlaceHolder03.jpg","PLAYER");
                    
                    player.stop();
                    ACTOR_HANDLER.registerPlayer(player,1);
                }
        	
        	function runGameLoop(){
        		gameLoop = setInterval(function() {
                            
                            draw();
                            update();
        		}, 1000/FPS);
        	}
        	function draw() {
                   // console.log("DRAWING STARTING");
                    game_context.clearRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);
        		ACTOR_HANDLER.drawActors();
                    //console.log("DRAWING FINISHED");
        	}
        	function update(){
                    //console.log("UPADTING STARTING");
        		ACTOR_HANDLER.update();
                    //console.log("UPADTING FINISHED");
        	}
        	
        	
        	
        </script>
	</body>
</html>