<!DOCTYPE html>
<html>
	<head>
		<title>Game</title>
                <script src="js/Framework/ActorHandler.js" type="text/javascript"></script>
                <script src="js/Framework/Actor.js" type="text/javascript"></script>
                <script src="js/libs/keypress/keypress.js" type="text/javascript"></script>
                <script src="js/Framework/Commands.js" type="text/javascript"></script>
                <script src="js/Framework/GUID_GENERATOR.js" type="text/javascript"></script>
                <script src="js/Framework/ActorFactory.js" type="text/javascript"></script>
	</head>
	<body>
	
		<canvas id="gameCanvas" width=800 height=600 style= "border:1px solid black">
			Browser doesn't support HTML5
		</canvas>
		
		<h1>Test</h1>
		<input type="button" onclick="runGameLoop()" value="Run Game">
		<input type="button" onclick="addActorOne()" value="Add Actor One">
                <input type="button" onclick="addActorTwo()" value="Add Actor Two">
                <input type="button" onclick="addPlayer()" value="Add Player">
                <input type="button" onclick="setup()" value="Setup">
                
                <a href="actorCreater.html">Actor Creator</a>
                
		<script type='text/javascript'>
      		
                var CANVAS_WIDTH = 480;
                var CANVAS_HEIGHT = 320;
                var FPS = 30;
        	var gameLoop;
                var ACTION_HANDLER;
                var game_canvas;
                var game_context;
        	var ACTOR_FACTORY;
                
                
                    
                function setup(){
                    
        	game_canvas = document.getElementById("gameCanvas");
                game_context = game_canvas.getContext("2d");
                ACTOR_HANDLER = new ActorHandler();
                
                ACTOR_HANDLER.registerCollisionCheck("PLAYER","FLOWER_RED", new KillCommand(new ScoreCommand(null)));
                ACTOR_HANDLER.registerCollisionCheck("PLAYER","FLOWER_BLUE", new KillCommand(new ScoreCommand(null)));
                ACTOR_HANDLER.registerCollisionCheck("PLAYER","FLOWER_GREEN", new KillCommand(new ScoreCommand(null)));
                ACTOR_HANDLER.registerCollisionCheck("PLAYER","FLOWER_PURPLE", new KillCommand(new ScoreCommand(null)));
                
       		ACTOR_HANDLER.registerCollisionCheck("PLAYER","ACTOR_ONE", new KillCommand(new ScoreCommand(null)));
                
                ACTOR_FACTORY = new ActorFactory();
                
                ACTOR_FACTORY.registerActor("SPIDER_BLACK",0,2,true,"images/FotBB/spider_black.jpg");
                ACTOR_FACTORY.registerActor("SPIDER_RED",0,5,true,"images/FotBB/spider_red.jpg");
                ACTOR_FACTORY.registerActor("SPIDER_BLUE",0,7,true,"images/FotBB/spider_blue.jpg");
                ACTOR_FACTORY.registerActor("SPIDER_GREEN",0,10,true,"images/FotBB/spider_green.jpg");
                
                ACTOR_FACTORY.registerActor("FLOWER_RED",250,0,true,"images/FotBB/flower_red.jpg");
                ACTOR_FACTORY.registerActor("FLOWER_BLUE",500,0,true,"images/FotBB/flower_blue.jpg");
                ACTOR_FACTORY.registerActor("FLOWER_GREEN",750,0,true,"images/FotBB/flower_green.jpg");
                ACTOR_FACTORY.registerActor("FLOWER_PURPLE",1000,0,true,"images/FotBB/flower_purple.jpg");
                
                ACTOR_FACTORY.registerActor("PLAYER",0,7,false,"images/FotBB/bee.jpg");
                
                CANVAS_WIDTH = game_canvas.width;
                CANVAS_HEIGHT = game_canvas.height;
                
                for(var i = 0; i <2; i++){
                    ACTOR_HANDLER.registerActor(ACTOR_FACTORY.createActorRandom("SPIDER_BLACK"));
                    ACTOR_HANDLER.registerActor(ACTOR_FACTORY.createActorRandom("FLOWER_RED"));
                }
                    
                }
        	
        	function addActorOne(){
                    //Math.floor(Math.random() * 480)
                    var actor = ACTOR_FACTORY.createActorRandom("ACTOR_ONE");
                    
                    ACTOR_HANDLER.registerActor(actor);
        	}
                
                function addActorTwo(){
                    //Math.floor(Math.random() * 480)
                    var actor = ACTOR_FACTORY.createActorRandom("ACTOR_TWO");
                    actor.stop();
                    ACTOR_HANDLER.registerActor(actor);
        	}
                
                function addPlayer(){
                    var player = ACTOR_FACTORY.createActor("PLAYER",300,300);
                    
                    player.stop();
                    ACTOR_HANDLER.registerPlayer(player,1);
                }
        	
        	function runGameLoop(){
        		gameLoop = setInterval(function() {
                            
                            draw();
                            update();
        		}, 1000/FPS);
        	}
        	function draw() {
                   // console.log("DRAWING STARTING");
                    game_context.clearRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);
        		ACTOR_HANDLER.drawActors();
                    //console.log("DRAWING FINISHED");
        	}
        	function update(){
                    //console.log("UPADTING STARTING");
        		ACTOR_HANDLER.update();
                    //console.log("UPADTING FINISHED");
        	}
        	
        	
        	
        </script>
	</body>
</html>